import*as y from"@linera/client";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(t){if(t.ep)return;t.ep=!0;const s=n(t);fetch(t.href,s)}})();const B="4bbc5d5a8c5b00d85679215eba9ece67741ad18e45545c125d5e9aa5494b8ea6",u=[{value:0,label:"Starting Point"},{value:5,label:"Warm-Up"},{value:10,label:"Halfway"},{value:15,label:"Going Strong"},{value:20,label:"Champion!"}];let h=0;function w(e){document.getElementById("count").innerText=e;let i=u[0],n=null;for(let t=0;t<u.length;t++)e>=u[t].value&&(i=u[t],n=u[t+1]||null);document.getElementById("milestone-label").innerText=i.label;let o=n?(e-i.value)/(n.value-i.value)*100:100;document.getElementById("progress-fill").style.width=Math.min(o,100)+"%"}const l=document.getElementById("gameCanvas"),a=l.getContext("2d");class b{constructor(){this.x=60,this.y=l.height/2,this.velocity=0,this.gravity=.3,this.jumpStrength=-6,this.radius=10}jump(){this.velocity=this.jumpStrength}update(){this.velocity+=this.gravity,this.y+=this.velocity,this.y<0&&(this.y=0),this.y>l.height&&(this.y=l.height)}draw(){a.beginPath(),a.fillStyle="#4CAF50",a.arc(this.x,this.y,this.radius,0,Math.PI*2),a.fill()}}class C{constructor(){this.x=l.width,this.width=40,this.gap=180,this.top=Math.random()*(l.height-this.gap-50),this.bottom=this.top+this.gap,this.speed=1.5,this.passed=!1}update(){this.x-=this.speed}draw(){a.fillStyle="#888",a.fillRect(this.x,0,this.width,this.top),a.fillRect(this.x,this.bottom,this.width,l.height-this.bottom)}collides(i){const n=i.x+i.radius>this.x&&i.x-i.radius<this.x+this.width,o=i.y-i.radius<this.top,t=i.y+i.radius>this.bottom;return n&&(o||t)}}let c=new b,d=[],g=0,f=!1;function E(){c=new b,d=[],g=0,f=!1,h=0,w(h)}function v(){a.clearRect(0,0,l.width,l.height),c.update(),c.draw(),g%120===0&&d.push(new C),d.forEach(e=>{e.update(),e.draw(),!e.passed&&e.x+e.width<c.x&&(e.passed=!0,h++,w(h),p.query('{ "query": "mutation { increment(value: 1) }" }')),e.collides(c)&&(f=!0)}),d=d.filter(e=>e.x+e.width>0),f?(a.fillStyle="red",a.font="24px sans-serif",a.fillText("Game Over! Click to restart",60,l.height/2),location.reload()):requestAnimationFrame(v),g++}l.addEventListener("click",()=>{f?(E(),v()):c.jump()});let p;async function P(){await y.default();const e=await new y.Faucet("https://faucet.testnet-babbage.linera.net"),i=await e.createWallet(),n=await new y.Client(i);document.getElementById("chain-id").innerText=await e.claimChain(n),p=await n.frontend().application(B);const o=document.getElementById("logs");n.onNotification(s=>{var x;const r=(x=s.reason)==null?void 0:x.NewBlock;if(!r)return;const m=o.getElementsByTagName("template")[0].content.cloneNode(!0);m.querySelector(".height").textContent=r.height,m.querySelector(".hash").textContent=r.hash,o.insertBefore(m,o.firstChild)});const t=await p.query('{ "query": "query { value }" }');h=JSON.parse(t).data.value,w(h)}await P();v();
